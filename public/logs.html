<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Log de Custos - Retorno Fácil</title>
  <meta name="description" content="Auditoria de custos de devoluções com regras aplicadas e trilha de responsabilidade." />
  <meta name="author" content="Retorno Fácil" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/logs.css">
  <link rel="stylesheet" href="css/navigation.css">
  <link rel="shortcut icon" href="assets/img/logo_rf.png" type="icon">
</head>
<body class="logs-page">
  <script src="js/navigation.js"></script>
  
  <main class="container-principal"> 
    <header class="cabecalho-pagina animate-slide-down">
      <div class="info-cabecalho">
        <h1 class="titulo-pagina">Log de Custos</h1>
        <p class="subtitulo-pagina">Auditoria de custos com regras aplicadas automaticamente</p>
      </div>

      <div class="acoes-topo">
        <button id="btnImportarCsv" class="botao botao-primario">
          <svg class="icone-botao" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
          </svg>
          Importar CSV
        </button>
        <input id="inputCsv" type="file" accept=".csv,text/csv" hidden>

        <a class="botao botao-secundario" href="/assets/modelo_pos_venda.csv" download>
          <svg class="icone-botao" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
          </svg>
          Modelo CSV
        </a>
      </div>
    </header>

    <section class="resumo-totais animate-fade-in" aria-live="polite" style="animation-delay: 0.1s">
      <div class="item-resumo">
        <div class="icone-resumo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"/>
          </svg>
        </div>
        <div>
          <span class="rotulo-resumo">Total de registros</span>
          <span class="valor-resumo" id="total-registros">0</span>
        </div>
      </div>
      <div class="item-resumo destaque-valor">
        <div class="icone-resumo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"/>
          </svg>
        </div>
        <div>
          <span class="rotulo-resumo">Soma do período</span>
          <span class="valor-resumo destaque" id="soma-periodo">R$ 0,00</span>
        </div>
      </div>
    </section>
 
    <section class="cartao-filtros animate-fade-in" aria-labelledby="filtros-title" style="animation-delay: 0.2s">
      <div class="cabecalho-filtros">
        <button class="toggle-filtros" id="toggle-filtros" aria-expanded="true" aria-controls="filtros-conteudo">
          <svg class="icone-toggle" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M6,13H18V11H6M3,6V8H21V6M10,18H14V16H10V18Z"/>
          </svg>
          <h2 id="filtros-title" class="titulo-secao">Filtros</h2>
          <svg class="icone-chevron" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
          </svg>
        </button>
        <div class="contador-resultados" id="contador-filtros">
          <span class="contador-badge">Todos os registros</span>
        </div>
      </div>
      
      <div class="filtros-conteudo" id="filtros-conteudo">
         Simplified filter layout with better grouping 
        <div class="grade-filtros">
          <div class="grupo-filtro-linha">
            <div class="grupo-filtro">
              <label class="rotulo-filtro" for="filtro-data-de">Data de</label>
              <input type="date" id="filtro-data-de" class="campo-entrada">
            </div>

            <div class="grupo-filtro">
              <label class="rotulo-filtro" for="filtro-data-ate">Data até</label>
              <input type="date" id="filtro-data-ate" class="campo-entrada">
            </div>
          </div>

          <div class="grupo-filtro-linha">
            <div class="grupo-filtro">
              <label class="rotulo-filtro" for="filtro-status">Status</label>
              <div class="select-wrapper">
                <select id="filtro-status" class="campo-entrada">
                  <option value="">Todos</option>
                  <option value="pendente">Pendente</option>
                  <option value="aprovado">Aprovado</option>
                  <option value="rejeitado">Rejeitado</option>
                  <option value="recebido_cd">Recebido no CD</option>
                  <option value="em_inspecao">Em inspeção</option>
                </select>
              </div>
            </div>

            <div class="grupo-filtro">
              <label class="rotulo-filtro" for="filtro-responsavel">Responsável</label>
              <div class="select-wrapper">
                <select id="filtro-responsavel" class="campo-entrada">
                  <option value="">Todos</option>
                  <option value="plataforma">Plataforma</option>
                  <option value="loja">Loja</option>
                  <option value="logistica">Logística</option>
                </select>
              </div>
            </div>
          </div>

          <div class="grupo-filtro-linha">
            <div class="grupo-filtro">
              <label class="rotulo-filtro" for="filtro-loja">Loja</label>
              <input type="text" id="filtro-loja" class="campo-entrada" placeholder="Nome da loja">
            </div>

            <div class="grupo-filtro">
              <label class="rotulo-filtro" for="filtro-itens-pagina">Itens por página</label>
              <div class="select-wrapper">
                <select id="filtro-itens-pagina" class="campo-entrada">
                  <option value="25">25</option>
                  <option value="50" selected>50</option>
                  <option value="100">100</option>
                </select>
              </div>
            </div>
          </div>

          <div class="grupo-filtro coluna-completa">
            <label class="rotulo-filtro" for="filtro-busca">Buscar</label>
            <div class="campo-busca">
              <svg class="icone-busca" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
              <input type="text" id="filtro-busca" class="campo-entrada-busca" placeholder="Pedido, cliente, SKU ou motivo…">
              <button type="button" class="botao-limpar-busca" onclick="document.getElementById('filtro-busca').value = ''" aria-label="Limpar busca">
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="acoes-filtros coluna-completa">
            <button id="botao-aplicar" class="botao botao-primario">
              <svg class="icone-botao" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/>
              </svg>
              Aplicar
            </button>
            <button id="botao-limpar" class="botao botao-secundario">
              <svg class="icone-botao" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
              </svg>
              Limpar
            </button>
            <button id="botao-exportar" class="botao botao-secundario">
              <svg class="icone-botao" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M23,12L19,8V11H10V13H19V16M1,18V6C1,4.89 1.89,4 3,4H15A2,2 0 0,1 17,6V9H15V6H3V18H15V15H17V18A2,2 0 0,1 15,20H3C1.89,20 1,19.11 1,18Z"/>
              </svg>
              Exportar
            </button>
            
            <label class="chk-inline">
              <input type="checkbox" id="chkDryRun">
              <span class="checkbox-custom"></span>
              <span>Simular importação</span>
            </label>
          </div>
        </div>

        <div class="regras-info">
          <svg class="icone-info" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
          </svg>
          <div>
            <strong>Regras de cálculo:</strong>
            <span>Rejeitado = R$ 0 · Motivo do cliente = R$ 0 · Recebido no CD/Inspeção = só frete</span>
          </div>
        </div>
      </div>
    </section>

    <section class="cartao-tabela animate-fade-in" style="animation-delay: 0.3s">
      <div class="cabecalho-tabela">
        <h3 class="titulo-tabela">Registros</h3>
      </div>
      <div class="container-tabela">
        <table class="tabela-logs">
          <thead>
            <tr>
              <th data-col="event_at" class="sortable">
                <span class="th-content">
                  Data
                  <svg class="icone-sort" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M18,21L14,17H17V7H14L18,3L22,7H19V17H22M2,19V17H12V19M2,13V11H9V13M2,7V5H6V7H2Z"/>
                  </svg>
                </span>
              </th>
              <th data-col="numero_pedido" class="sortable">
                <span class="th-content">
                  Pedido
                  <svg class="icone-sort" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M18,21L14,17H17V7H14L18,3L22,7H19V17H22M2,19V17H12V19M2,13V11H9V13M2,7V5H6V7H2Z"/>
                  </svg>
                </span>
              </th>
              <th data-col="cliente_nome" class="sortable">
                <span class="th-content">
                  Cliente
                  <svg class="icone-sort" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M18,21L14,17H17V7H14L18,3L22,7H19V17H22M2,19V17H12V19M2,13V11H9V13M2,7V5H6V7H2Z"/>
                  </svg>
                </span>
              </th>
              <th data-col="loja_nome" class="sortable">
                <span class="th-content">
                  Loja
                  <svg class="icone-sort" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M18,21L14,17H17V7H14L18,3L22,7H19V17H22M2,19V17H12V19M2,13V11H9V13M2,7V5H6V7H2Z"/>
                  </svg>
                </span>
              </th>
              <th data-col="status" class="sortable">
                <span class="th-content">
                  Status
                  <svg class="icone-sort" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M18,21L14,17H17V7H14L18,3L22,7H19V17H22M2,19V17H12V19M2,13V11H9V13M2,7V5H6V7H2Z"/>
                  </svg>
                </span>
              </th>
              <th class="texto-direita sortable" data-col="total">
                <span class="th-content">
                  Total
                  <svg class="icone-sort" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                    <path d="M18,21L14,17H17V7H14L18,3L22,7H19V17H22M2,19V17H12V19M2,13V11H9V13M2,7V5H6V7H2Z"/>
                  </svg>
                </span>
              </th>
            </tr>
          </thead>
          <tbody id="corpo-tabela">
            <tr><td colspan="6" class="celula-carregando"><div class="loading-spinner"></div> Carregando…</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <nav class="controles-paginacao animate-fade-in" aria-live="polite" style="animation-delay: 0.4s">
      <button id="botao-anterior" class="botao botao-paginacao" disabled>
        <svg class="icone-botao" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"/>
        </svg>
        Anterior
      </button>
      <span class="info-paginacao" id="info-paginacao">Página 1 de 1</span>
      <button id="botao-proxima" class="botao botao-paginacao" disabled>
        Próxima
        <svg class="icone-botao" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/>
        </svg>
      </button>
    </nav>

    <div id="toast" class="toast" role="status" aria-live="polite">
      <div class="toast-content">
        <svg class="toast-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"/>
        </svg>
        <span class="toast-message"></span>
      </div>
    </div>
  </main>

  <script src="js/logs.js"></script>
</body>
</html>
